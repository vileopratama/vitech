<?xml version="1.0"?>
<openerp>
    <data>
       <!-- Top menu item -->
        <menuitem name="Lounge"
            id="menu_lounge_root"
            sequence="23"/>

        <record model="ir.ui.view" id="view_lounge_config_search">
            <field name="name">lounge.config.search.view</field>
            <field name="model">lounge.config</field>
            <field name="arch" type="xml">
                <search string="Point of Lounge Config">
                    <field name="name" />
                    <filter string="Active" domain="[('state', '=', 'active')]" />
                    <filter string="Inactive" domain="[('state', '=', 'inactive')]" />
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_lounge_config_kanban">
            <field name="name">Point of Lounge</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">lounge.config</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="search_view_id" ref="view_lounge_config_search" />
            <field name="domain">[('state','=','active')]</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new Lounge config.
              </p><p>
                Configure at least one Point of Sale to be able to sell through the PoS interface.
              </p>
            </field>
        </record>

        <menuitem action="action_lounge_config_kanban"
                  parent="menu_lounge_root"
                  name="Dashboard"
                  id="menu_lounge_dashboard"
                  sequence="1"/>

        <menuitem name="Orders" id="menu_lounge_of_sale" parent="menu_lounge_root" sequence="10"/>

        <record model="ir.ui.view" id="view_lounge_session_search">
            <field name="name">lounge.session.search.view</field>
            <field name="model">lounge.session</field>
            <field name="arch" type="xml">
                <search string="Lounge Session">
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="view_lounge_session_form">
            <field name="name">lounge.session.form.view</field>
            <field name="model">lounge.session</field>
            <field name="arch" type="xml">
                <form string="Lounge Session">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="opening_control,opened,closing_control,closed" nolabel="1" />
                    </header>
                    <sheet>
                        <h1 class="oe_title">
                            Session:
                            <field name="name" attrs="{'invisible': [('name','=','/')]}" class="oe_inline"/>
                        </h1>
                         <group>
                              <group>
                                <field name="user_id"/>
                                <!--<field name="currency_id" invisible="1"/>-->
                                <field name="config_id"/>
                                <field name="rescue" attrs="{'invisible': [('rescue', '=', False)]}" />
                            </group>
                             <group>
                                 <!--attrs="{'invisible' : [('state', '=', 'opening_control')]}"-->
                                <field name="start_at" />
                                <field name="stop_at" attrs="{'invisible' : [('state', '!=', 'closed')]}"/>
                            </group>
                            <newline/>
                         </group>

                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_lounge_session">
            <field name="name">Sessions</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">lounge.session</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_lounge_session_search" />
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to start a new lounge session.
              </p><p>
                A session is a period of time, usually one day, during which
                you sell through the point of sale. The user has to check the
                currencies in your cash registers at the beginning and the end
                of each session.
              </p><p>
                Note that you may use the menu <i>Your Session</i>
                to quickly open a new session.
              </p>
            </field>
        </record>

        <record model="ir.ui.view" id="view_lounge_session_tree">
            <field name="name">lounge.session.tree.view</field>
            <field name="model">lounge.session</field>
            <field name="arch" type="xml">
                <tree string="Lounge Session">
                    <field name="config_id" />
                    <field name="name" />
                    <field name="user_id" />
                    <field name="start_at" />
                    <field name="stop_at" />
                    <field name="state" />
                </tree>
            </field>
        </record>

        <menuitem name="Configuration" parent="menu_lounge_root"
            id="menu_lounge_config" sequence="100"/>

        <record model="ir.actions.act_window" id="action_lounge_config_pos">
            <field name="name">Lounge</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">lounge.config</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_lounge_config_search" />
        </record>

        <menuitem
            parent="menu_lounge_config"
            action="action_lounge_config_pos"
            id="menu_pos_config_pos"
            />

        <menuitem
            name="Lounge Session"
            parent="menu_lounge_of_sale"
            action="action_lounge_session"
            id="menu_lounge_session_all"
            sequence="1"
            />

    </data>
</openerp>